{% extends "index.html" %}
{% block title %}
  {% if is_editing %}Edit{% else %}Create{% endif %} Profile | Workout Buddy
{% endblock %}

{% block content %}
<style>
  :root {
    --neon-green-500: #2cff05;
    --neon-green-glow: 0 0 10px #2cff05, 0 0 20px #2cff05;
  }

  body {
    font-family: 'Inter', sans-serif;
    background-color: #0a0a0a;
    color: #e0ffe0;
  }

  input[type=number]::-webkit-inner-spin-button,
  input[type=number]::-webkit-outer-spin-button {
    -webkit-appearance: none;
    margin: 0;
  }

  input[type=number] {
    -moz-appearance: textfield;
  }

  input, select, option, label {
    color: #e0ffe0;
    background-color: #1a1a1a;
    border: 1px solid #2cff05;
    border-radius: 8px;
    padding: 0.5rem;
    transition: 0.3s ease-in-out;
  }

  input:focus, select:focus {
    outline: none;
    box-shadow: var(--neon-green-glow);
    border-color: #2cff05;
  }

  select option {
    background-color: #1a1a1a;
    color: #e0ffe0;
  }

  .form-title {
    font-size: 2rem;
    text-align: center;
    color: var(--neon-green-500);
    text-shadow: 0 0 5px var(--neon-green-500);
  }

  .form-container {
    background-color: #111;
    border: 1px solid #2cff05;
    border-radius: 16px;
    box-shadow: 0 0 20px rgba(44, 255, 5, 0.2);
    padding: 2.5rem;
  }

  .neon-btn {
    background: transparent;
    border: 2px solid var(--neon-green-500);
    color: var(--neon-green-500);
    padding: 0.75rem 2rem;
    border-radius: 12px;
    font-weight: bold;
    transition: 0.4s;
    position: relative;
    overflow: hidden;
  }

  .neon-btn::before {
    content: '';
    position: absolute;
    top: -50%;
    left: -50%;
    width: 200%;
    height: 200%;
    background: radial-gradient(circle, rgba(44,255,5,0.3) 0%, transparent 80%);
    transform: rotate(45deg);
    animation: pulse-glow 2s infinite;
  }

  @keyframes pulse-glow {
    0%, 100% { transform: scale(1) rotate(45deg); opacity: 0.5; }
    50% { transform: scale(1.2) rotate(45deg); opacity: 1; }
  }

  .neon-btn:hover {
    background-color: var(--neon-green-500);
    color: black;
    box-shadow: var(--neon-green-glow);
    transform: translateY(-2px);
  }

  .text-red-600 {
    color: #ff4c4c;
  }

</style>

<div class="min-h-screen flex items-center justify-center px-4">
  <div class="w-full max-w-4xl form-container">

    <h2 class="form-title mb-10">
      {% if is_editing %}Update Your Profile{% else %}Create Your Profile{% endif %}
    </h2>

    {% if messages %}
      <div class="mb-4">
        {% for message in messages %}
          <p class="text-center text-{{ message.tags }}-600">{{ message }}</p>
        {% endfor %}
      </div>
    {% endif %}

    <form method="POST" class="grid grid-cols-1 md:grid-cols-2 gap-6">
      {% csrf_token %}
      
      <!-- Full Name -->
      <div>
        <label for="full_name">Full Name</label>
        <input type="text" name="full_name" id="full_name" value="{{ form.data.full_name }}" />
        {% if form.errors.full_name %}
          <p class="text-red-600 text-sm">{{ form.errors.full_name.0 }}</p>
        {% endif %}
      </div>

      <!-- Age -->
      <div>
        <label for="age">Age</label>
        <input type="number" name="age" id="age" value="{{ form.data.age }}" />
        {% if form.errors.age %}
          <p class="text-red-600 text-sm">{{ form.errors.age.0 }}</p>
        {% endif %}
      </div>

      <!-- Gender -->
      <div>
        <label for="gender">Gender</label>
        <select name="gender" id="gender">
          <option value="">Select Gender</option>
          <option value="male" {% if form.data.gender == 'male' %}selected{% endif %}>Male</option>
          <option value="female" {% if form.data.gender == 'female' %}selected{% endif %}>Female</option>
          <option value="other" {% if form.data.gender == 'other' %}selected{% endif %}>Other</option>
        </select>
        {% if form.errors.gender %}
          <p class="text-red-600 text-sm">{{ form.errors.gender.0 }}</p>
        {% endif %}
      </div>

      <!-- Height -->
      <div>
        <label for="height">Height (cm)</label>
        <input type="number" name="height" id="height" value="{{ form.data.height }}" step="0.1" />
        {% if form.errors.height %}
          <p class="text-red-600 text-sm">{{ form.errors.height.0 }}</p>
        {% endif %}
      </div>

      <!-- Weight -->
      <div>
        <label for="weight">Weight (kg)</label>
        <input type="number" name="weight" id="weight" value="{{ form.data.weight }}" step="0.1" />
        {% if form.errors.weight %}
          <p class="text-red-600 text-sm">{{ form.errors.weight.0 }}</p>
        {% endif %}
      </div>

      <!-- Activity Level -->
      <div>
        <label for="activity_level">Activity Level</label>
        <select name="activity_level" id="activity_level">
          <option value="">Select Activity Level</option>
          <option value="sedentary" {% if form.data.activity_level == 'sedentary' %}selected{% endif %}>Sedentary</option>
          <option value="light" {% if form.data.activity_level == 'light' %}selected{% endif %}>Lightly Active</option>
          <option value="moderate" {% if form.data.activity_level == 'moderate' %}selected{% endif %}>Moderately Active</option>
          <option value="active" {% if form.data.activity_level == 'active' %}selected{% endif %}>Active</option>
          <option value="very_active" {% if form.data.activity_level == 'very_active' %}selected{% endif %}>Very Active</option>
        </select>
        {% if form.errors.activity_level %}
          <p class="text-red-600 text-sm">{{ form.errors.activity_level.0 }}</p>
        {% endif %}
      </div>

      <!-- Goal -->
      <div>
        <label for="goal">Your Goal</label>
        <select name="goal" id="goal">
          <option value="">Select Goal</option>
          <option value="lose_weight" {% if form.data.goal == 'lose_weight' %}selected{% endif %}>Lose Weight</option>
          <option value="gain_muscle" {% if form.data.goal == 'gain_muscle' %}selected{% endif %}>Gain Muscle</option>
          <option value="maintain_fitness" {% if form.data.goal == 'maintain_fitness' %}selected{% endif %}>Maintain Fitness</option>
        </select>
        {% if form.errors.goal %}
          <p class="text-red-600 text-sm">{{ form.errors.goal.0 }}</p>
        {% endif %}
      </div>

      <!-- Submit Button -->
      <div class="md:col-span-2 flex justify-center mt-6">
        <button type="submit" class="neon-btn">
          {% if is_editing %}Update Profile{% else %}Create Profile{% endif %}
        </button>
      </div>
    </form>
  </div>
</div>
{% endblock %}
